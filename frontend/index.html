<!-- 
This software is provided for non-commercial use only.
Commercial use is strictly prohibited.
If you use, modify, or redistribute this software, you must provide proper attribution to the original author.
(c) 2026 Onur Tuna. All rights reserved.
-->

<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NVR Dashboard</title>
    <!-- System fonts for offline use -->
    <style>
        :root {
            --font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
        }
    </style>
    <link rel="stylesheet" href="style.css">
    <!-- HLS.js for video playback (loaded locally for offline use) -->
    <script src="hls.min.js"></script>
</head>

<body>
    <div class="app-layout">
        <!-- Sidebar Navigation -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <div class="logo">
                    <svg viewBox="0 0 24 24" width="24" height="24" stroke="currentColor" stroke-width="2" fill="none"
                        stroke-linecap="round" stroke-linejoin="round" class="css-i6dzq1">
                        <rect x="2" y="2" width="20" height="20" rx="2.18" ry="2.18"></rect>
                        <line x1="7" y1="2" x2="7" y2="22"></line>
                        <line x1="17" y1="2" x2="17" y2="22"></line>
                        <line x1="2" y1="12" x2="22" y2="12"></line>
                        <line x1="2" y1="7" x2="7" y2="7"></line>
                        <line x1="2" y1="17" x2="7" y2="17"></line>
                        <line x1="17" y1="17" x2="22" y2="17"></line>
                        <line x1="17" y1="7" x2="22" y2="7"></line>
                    </svg>
                    <span>Oasis NVR</span>
                </div>
            </div>
            <nav class="nav-menu">
                <a href="#" class="nav-item active" data-target="dashboard-view">
                    <svg viewBox="0 0 24 24" width="20" height="20" stroke="currentColor" stroke-width="2" fill="none"
                        stroke-linecap="round" stroke-linejoin="round">
                        <rect x="3" y="3" width="7" height="7"></rect>
                        <rect x="14" y="3" width="7" height="7"></rect>
                        <rect x="14" y="14" width="7" height="7"></rect>
                        <rect x="3" y="14" width="7" height="7"></rect>
                    </svg>
                    Dashboard
                </a>
                <a href="#" class="nav-item" data-target="live-view">
                    <svg viewBox="0 0 24 24" width="20" height="20" stroke="currentColor" stroke-width="2" fill="none"
                        stroke-linecap="round" stroke-linejoin="round">
                        <polygon points="23 7 16 12 23 17 23 7"></polygon>
                        <rect x="1" y="5" width="15" height="14" rx="2" ry="2"></rect>
                    </svg>
                    Live View
                </a>
                <a href="#" class="nav-item" data-target="recordings-view">
                    <svg viewBox="0 0 24 24" width="20" height="20" stroke="currentColor" stroke-width="2" fill="none"
                        stroke-linecap="round" stroke-linejoin="round">
                        <polygon points="5 3 19 12 5 21 5 3"></polygon>
                    </svg>
                    Recordings
                </a>
            </nav>
            <div class="sidebar-footer">
                <div class="status-indicator">
                    <span class="dot active"></span>
                    <span id="system-status-text">System Online</span>
                </div>
            </div>
        </aside>

        <!-- Main Content Area -->
        <main class="main-content">
            <header class="top-header">
                <h1 id="page-title">Dashboard</h1>
                <div class="time-display" id="clock">00:00:00</div>
            </header>

            <div class="content-container">
                <!-- Dashboard View -->
                <section id="dashboard-view" class="view active">
                    <div class="metrics-grid">
                        <div class="metric-card">
                            <div class="metric-icon blue">
                                <svg viewBox="0 0 24 24" width="24" height="24" stroke="currentColor" stroke-width="2"
                                    fill="none" stroke-linecap="round" stroke-linejoin="round">
                                    <path
                                        d="M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z">
                                    </path>
                                    <circle cx="12" cy="13" r="4"></circle>
                                </svg>
                            </div>
                            <div class="metric-info">
                                <h3>Total Cameras</h3>
                                <p class="metric-value" id="dash-cams-count">-</p>
                            </div>
                        </div>
                        <div class="metric-card">
                            <div class="metric-icon purple">
                                <svg viewBox="0 0 24 24" width="24" height="24" stroke="currentColor" stroke-width="2"
                                    fill="none" stroke-linecap="round" stroke-linejoin="round">
                                    <ellipse cx="12" cy="5" rx="9" ry="3"></ellipse>
                                    <path d="M21 12c0 1.66-4 3-9 3s-9-1.34-9-3"></path>
                                    <path d="M3 5v14c0 1.66 4 3 9 3s9-1.34 9-3V5"></path>
                                </svg>
                            </div>
                            <div class="metric-info">
                                <h3>Storage Pools</h3>
                                <p class="metric-value" id="dash-pools-count">-</p>
                            </div>
                        </div>
                        <div class="metric-card">
                            <div class="metric-icon green">
                                <svg viewBox="0 0 24 24" width="24" height="24" stroke="currentColor" stroke-width="2"
                                    fill="none" stroke-linecap="round" stroke-linejoin="round">
                                    <rect x="2" y="2" width="20" height="8" rx="2" ry="2"></rect>
                                    <rect x="2" y="14" width="20" height="8" rx="2" ry="2"></rect>
                                    <line x1="6" y1="6" x2="6.01" y2="6"></line>
                                    <line x1="6" y1="18" x2="6.01" y2="18"></line>
                                </svg>
                            </div>
                            <div class="metric-info">
                                <h3>Active Pool Usage</h3>
                                <p class="metric-value" id="dash-pool-usage">-</p>
                            </div>
                        </div>
                        <div class="metric-card">
                            <div class="metric-icon orange">
                                <svg viewBox="0 0 24 24" width="24" height="24" stroke="currentColor" stroke-width="2"
                                    fill="none" stroke-linecap="round" stroke-linejoin="round">
                                    <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
                                    <line x1="16" y1="2" x2="16" y2="6"></line>
                                    <line x1="8" y1="2" x2="8" y2="6"></line>
                                    <line x1="3" y1="10" x2="21" y2="10"></line>
                                </svg>
                            </div>
                            <div class="metric-info">
                                <h3>Total Segments</h3>
                                <p class="metric-value" id="dash-segments">-</p>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Live View -->
                <section id="live-view" class="view">
                    <div class="camera-grid" id="live-cameras-container">
                        <!-- Dynamic camera cards will be injected here -->
                    </div>
                </section>

                <!-- Recordings View -->
                <section id="recordings-view" class="view">
                    <div class="recordings-layout">
                        <div class="recordings-sidebar">
                            <div class="control-group">
                                <label for="rec-camera-select">Select Camera</label>
                                <select id="rec-camera-select" class="form-input">
                                    <option value="" disabled selected>Loading cameras...</option>
                                </select>
                            </div>

                            <div class="control-group">
                                <label for="rec-date-select">Select Date Range</label>
                                <div class="date-inputs">
                                    <div class="input-wrapper">
                                        <span class="input-label">From:</span>
                                        <input type="datetime-local" id="rec-date-from" class="form-input compact">
                                    </div>
                                    <div class="input-wrapper">
                                        <span class="input-label">To:</span>
                                        <input type="datetime-local" id="rec-date-to" class="form-input compact">
                                    </div>
                                </div>
                                <button id="btn-fetch-segments" class="btn btn-primary mt-2">Find Recordings</button>
                            </div>

                            <div class="segments-list-container">
                                <h4>Available Segments</h4>
                                <div id="segments-list" class="segments-list">
                                    <div class="empty-state">Select a camera to view segments</div>
                                </div>
                            </div>
                        </div>

                        <div class="recordings-player-container">
                            <div class="player-wrapper">
                                <video id="vod-player" controls playsinline></video>
                                <div class="player-overlay" id="vod-overlay">
                                    <span>Select a time range to play VOD</span>
                                </div>
                            </div>
                            <div class="player-controls">
                                <button id="btn-play-vod" class="btn btn-primary" disabled>
                                    <svg viewBox="0 0 24 24" width="16" height="16" stroke="currentColor"
                                        stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round">
                                        <polygon points="5 3 19 12 5 21 5 3"></polygon>
                                    </svg>
                                    Play Selected Range
                                </button>
                                <button id="btn-download-vod" class="btn btn-secondary" disabled>
                                    <svg viewBox="0 0 24 24" width="16" height="16" stroke="currentColor"
                                        stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round">
                                        <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                                        <polyline points="7 10 12 15 17 10"></polyline>
                                        <line x1="12" y1="15" x2="12" y2="3"></line>
                                    </svg>
                                    Export .TS
                                </button>
                            </div>
                        </div>
                    </div>
                </section>
            </div>
        </main>
    </div>

    <!-- Scripts -->
    <script src="app.js"></script>
</body>

</html>